(this["webpackJsonpreact-typescript"]=this["webpackJsonpreact-typescript"]||[]).push([[0],{41:function(e,t,r){},42:function(e,t,r){},45:function(e,t,r){},46:function(e,t,r){},47:function(e,t,r){},51:function(e,t,r){},54:function(e,t,r){"use strict";r.r(t);var s=r(2),o=r(0),a=r.n(o),n=r(7),i=r.n(n),c=(r(41),r(14)),l=r(28),d=r(29),u=r(34),p=r(32),m=r(8),b=(r(16),r(20)),f=r(22),j=r(19);r(42);var v=function(e){var t=Object(o.useState)(!1),r=Object(m.a)(t,2),a=r[0],n=r[1],i=Object(o.useState)({}),c=Object(m.a)(i,2),l=c[0],d=c[1],u=Object(o.useState)({message:"",type:""}),p=Object(m.a)(u,2),v=p[0],h=p[1];return Object(s.jsxs)("div",{children:[Object(s.jsx)("h4",{className:"mb-3",children:"PDF Document"}),Object(s.jsxs)("form",{encType:"multipart/form-data",id:"id_ajax_upload_form",method:"POST",noValidate:!0,children:[Object(s.jsx)("label",{htmlFor:"input_pdf",children:"Choose a PDF Document: "}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{id:"input_pdf",type:"file",accept:"application/pdf",onChange:function(e){var t;(function(e){var t,r,s,o=null===e||void 0===e||null===(t=e.target)||void 0===t||null===(r=t.files)||void 0===r||null===(s=r.item(0))||void 0===s?void 0:s.size;return"undefined"!==typeof o&&"number"===typeof o&&(!(o>15728640)||(h({message:"The size of the PDF must be 15 MB or less",type:"warning"}),!1))})(e)&&null!=e.target.files?(d(e.target.files[0]),n(!0),h({message:"",type:""})):(n(!1),null===(t=document.getElementById("id_ajax_upload_form"))||void 0===t||t.reset())},required:!0}),Object(s.jsx)("div",{className:"status-wrapper",children:Object(s.jsxs)(f.a,{variant:v.type,id:"submit-status",hidden:""===v.type,children:[Object(s.jsx)(j.a,{animation:"border",role:"status",hidden:"Waiting for Server response"!==v.message}),v.message]})}),Object(s.jsx)(b.a,{id:"submit-pdf",type:"submit",block:!0,onClick:function(t){if(t.preventDefault(),a){var r=new FormData,s=l;r.append("file",s),h({message:"Waiting for Server response",type:"info"}),fetch("/ajax/react",{method:"POST",body:r}).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})).then((function(t){t.error?h({message:"Server responded with error message: "+t.message,type:"danger"}):e.showColors(t.analysis_result,l)})).catch((function(e){h({message:""+e,type:"danger"})}))}else h({message:"Please select a Document first",type:"warning"})},disabled:"Waiting for Server response"===v.message,children:"Waiting for Server response"!==v.message?"Submit Document":"Waiting..."})]})]})},h=(r(45),r(46),["Choose PDF","Choose Colors","Download your new PDF!"]);var g,O=function(e){for(var t=[],r=0;r<3;r++)t.push(Object(s.jsxs)("li",{id:"progress-"+r,className:"list-group-item flex-fill "+(r===e.progress?"list-group-item-primary":"")+(r<e.progress?"list-group-item-secondary":""),children:[" ",h[r]]},r));return Object(s.jsx)("div",{className:"progress-wrapper",children:Object(s.jsx)("ul",{className:"list-group list-group-horizontal",children:t})})},C=r(27),y=r(35),x=r(24),w=r(33),S=r(31),N=r(30);r(47);!function(e){e.empty="empty",e.valid="valid",e.invalid="invalid",e.same="same",e.incomplete="incomplete"}(g||(g={}));var D=new Map([[g.empty,"No Color provided"],[g.valid,"Valid Color provided"],[g.invalid,"Color is invalid"],[g.same,"Color is not new"],[g.incomplete,"Color must have 6 characters"]]);var k=function(e){var t=function(){switch(i){case g.empty:case g.same:e.updateColors(e.color,"");break;case g.valid:e.updateColors(e.color,u);break;case g.invalid:case g.incomplete:default:e.updateColors(e.color,null)}},r=function(t){var r=t.target.value.replace(/[^a-f0-9]/gi,"").substring(0,6).toLowerCase();switch(r.length){case 0:c(g.empty);break;case 1:case 2:case 3:case 4:case 5:c(g.incomplete);break;case 6:r===e.color.replace(/[^a-f0-9]/gi,"")?c(g.same):c(g.valid);break;default:c(g.invalid)}p(r)},a=Object(o.useState)(g.empty),n=Object(m.a)(a,2),i=n[0],c=n[1],l=Object(o.useState)(""),d=Object(m.a)(l,2),u=d[0],p=d[1];return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"colorcode",style:{backgroundColor:e.color},children:[Object(s.jsx)("div",{id:"pre-".concat(e.color),className:"right-side",style:{backgroundColor:"#".concat(u),display:i===g.valid?"block":"None"}}),Object(s.jsx)("p",{onClick:function(t){var r=t.target,s=document.createElement("input");s.value=e.color,r.after(s),s.select(),document.execCommand("copy"),s.remove()},children:e.color})]}),Object(s.jsx)("p",{className:"pages",children:e.pages}),Object(s.jsx)(S.a,{placement:"bottom-start",transition:!1,overlay:Object(s.jsx)(N.a,{id:"tooltip-id-".concat(e.color),show:i!==g.empty,children:D.get(i)}),children:function(o){var a=o.ref,n=Object(y.a)(o,["ref"]);return Object(s.jsxs)(x.a,Object(C.a)(Object(C.a)({},n),{},{children:[Object(s.jsx)(x.a.Prepend,{children:Object(s.jsx)(x.a.Text,{ref:a,id:"input-".concat(e.color),className:i,children:"#"})}),Object(s.jsx)(w.a,{placeholder:"new Color","aria-placeholder":"new Color","aria-label":"new Color","aria-describedby":"input-".concat(e.color),value:u,onBlur:t,onChange:r})]}))}})]})},F=(r(51),r(52),r(9)),P=r.n(F);var $=function(e){var t=e.state(),r=t.colors,a=t.file,n=Object(o.useState)({mapOldColorsToNewColors:new Map,errors:new Set,alert:{type:"danger",msg:"You submitted invalid new colors for: ",active:!1},waitingForServerResponse:!1}),i=Object(m.a)(n,2),c=i[0],l=i[1],d=[];for(var u in r)d.push(Object(s.jsx)(k,{updateColors:function(e,t){null===t?l((function(t){return P()(t,{mapOldColorsToNewColors:{$remove:[e]},errors:{$add:[e]}})})):""===t?l((function(t){return P()(t,{mapOldColorsToNewColors:{$remove:[e]},errors:{$remove:[e]}})})):(l((function(r){return P()(r,{mapOldColorsToNewColors:{$add:[[e,t]]},errors:{$remove:[e]}})})),"No valid Colors were provided"===c.alert.msg&&l((function(e){return P()(e,{alert:{active:{$set:!1}}})})))},color:r[u][0],pages:r[u][1]},u));return Object(s.jsxs)("form",{id:"form-colors",autoComplete:"off",children:[Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"Showing Colors for: "}),a.name]}),Object(s.jsx)("div",{className:"analysis_result",children:d}),Object(s.jsx)("div",{className:"status-wrapper",children:Object(s.jsxs)(f.a,{variant:c.alert.type,id:"submit-status",hidden:0===c.errors.size&&!c.alert.active,children:[Object(s.jsx)(j.a,{animation:"border",role:"status",hidden:"Waiting for Server response..."!==c.alert.msg}),0!==c.errors.size?"You submitted invalid new colors for: "+Array.from(c.errors).join(", "):c.alert.msg]})}),Object(s.jsx)(b.a,{type:"submit",onClick:function(t){if(t.preventDefault(),0!==c.errors.size){var r=document.querySelector("#submit-status");null===r||void 0===r||r.classList.add("animate__animated","animate__pulse"),setTimeout((function(){null===r||void 0===r||r.classList.remove("animate__pulse")}),1e3)}else if(c.mapOldColorsToNewColors.size>0){l((function(e){return P()(e,{alert:{active:{$set:!0},type:{$set:"info"},msg:{$set:"Waiting for Server response..."}}})}));var s=new FormData,o=a;s.append("file",o),c.mapOldColorsToNewColors.forEach((function(e,t){s.append(t,e)})),fetch("/ajax/process",{method:"POST",body:s}).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})).then((function(t){t.error?l((function(e){return P()(e,{alert:{active:{$set:!0},type:{$set:"danger"},msg:{$set:"Request came back with the following error message: "+t.message}}})})):e.handleChange(t.b64)})).catch((function(e){l((function(t){return P()(t,{alert:{active:{$set:!0},type:{$set:"danger"},msg:{$set:"Request failed: "+e}}})}))}))}else l((function(e){return P()(e,{alert:{active:{$set:!0},type:{$set:"danger"},msg:{$set:"No valid Colors were provided"}}})}))},block:!0,disabled:"Waiting for Server response..."===c.alert.msg,children:"Waiting for Server response..."!==c.alert.msg?"Submit Colors":"Waiting..."})]})};var T,_=function(e){var t=e.oldFileName(),r=(null===t||void 0===t?void 0:t.split(".pdf")[0])+"-printable";return Object(s.jsxs)("div",{children:[Object(s.jsx)("h4",{className:"mb-3",children:"PDF Document"}),Object(s.jsx)("a",{href:"data:application/pdf;base64,"+e.b64(),className:"btn btn-success btn-block",download:r,children:"Download your new PDF!"})]})};!function(e){e[e.initial=0]="initial",e[e.submittedPDF=1]="submittedPDF",e[e.submittedColors=2]="submittedColors"}(T||(T={}));var W=function(e){Object(u.a)(r,e);var t=Object(p.a)(r);function r(e){var o,a;return Object(l.a)(this,r),(a=t.call(this,e)).componentsByProgress=(o={},Object(c.a)(o,T.initial,Object(s.jsx)(v,{showColors:function(e,t){a.setState({colors:e,progress:T.submittedPDF,file:t})}})),Object(c.a)(o,T.submittedPDF,Object(s.jsx)($,{state:function(){return a.state},handleChange:function(e){a.setState({b64:e,progress:T.submittedColors})}})),Object(c.a)(o,T.submittedColors,Object(s.jsx)(_,{b64:function(){return a.state.b64},oldFileName:function(){var e;return null===(e=a.state.file)||void 0===e?void 0:e.name}})),o),a.state={colors:null,progress:T.initial,file:null,b64:""},a}return Object(d.a)(r,[{key:"displayWarning",value:function(e){alert(e)}},{key:"render",value:function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)(O,{progress_enum:T,progress:this.state.progress}),this.componentsByProgress[this.state.progress]]})}}]),r}(a.a.Component),z=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,59)).then((function(t){var r=t.getCLS,s=t.getFID,o=t.getFCP,a=t.getLCP,n=t.getTTFB;r(e),s(e),o(e),a(e),n(e)}))};i.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(W,{})}),document.getElementById("root")),z()}},[[54,1,2]]]);
//# sourceMappingURL=main.d9e8f86c.chunk.js.map