{"version":3,"sources":["Components/FileUpload/index.tsx","Components/ProgressMeter/index.tsx","Components/ColorInput/index.tsx","Components/ColorForm/index.tsx","Components/Download/index.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["FileUpload","prop","useState","isValid","setIsValid","file","setFile","message","type","alertState","setAlertState","className","encType","id","method","noValidate","htmlFor","accept","onChange","e","event","fileSize","target","files","item","size","fileIsValid","document","getElementById","reset","required","Alert","variant","hidden","Spinner","animation","role","Button","block","onClick","preventDefault","data","FormData","pdf","append","fetch","body","then","response","ok","Error","statusText","json","error","showColors","analysis_result","catch","disabled","paginationTexts","ProgressMeter","COLORSTATUS","props","items","i","push","progress","messageLookup","Map","empty","valid","invalid","same","incomplete","ColorInput","handleOnBlur","status","updateColors","color","value","handleOnChange","nval","replace","substring","toLowerCase","length","setStatus","setValue","style","backgroundColor","display","htmlparagraph_colorcode","temp_input_elem","createElement","after","select","execCommand","remove","pages","OverlayTrigger","placement","transition","overlay","Tooltip","show","get","ref","triggerHandler","InputGroup","Prepend","Text","FormControl","placeholder","aria-placeholder","aria-label","aria-describedby","onBlur","ColorForm","state","colors","mapOldColorsToNewColors","errors","Set","alert","msg","active","waitingForServerResponse","formState","setFormState","colorInputsArray","index","newColor","update","$remove","$add","$set","autoComplete","name","Array","from","join","element","querySelector","classList","add","setTimeout","forEach","key","handleChange","b64","Download","Progress","oldFileName","newFileName","split","href","download","App","componentsByProgress","initial","setState","submittedPDF","b64_in","submittedColors","progress_enum","this","React","Component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"wYAgGeA,MAxFf,SAAoBC,GAA+E,IAAD,EAChEC,oBAAS,GADuD,mBACvFC,EADuF,KAC9EC,EAD8E,OAEtEF,mBAAS,IAF6D,mBAEvFG,EAFuF,KAEjFC,EAFiF,OAG1DJ,mBAAS,CAAEK,QAAS,GAAIC,KAAM,KAH4B,mBAGvFC,EAHuF,KAG3EC,EAH2E,KAoB9F,OACI,gCACI,oBAAIC,UAAU,OAAd,0BACA,uBAAMC,QAAQ,sBAAsBC,GAAG,sBAAsBC,OAAO,OAAOC,YAAU,EAArF,UACI,uBAAOC,QAAQ,YAAf,qCACA,uBACA,uBAAOH,GAAG,YAAYL,KAAK,OAAOS,OAAO,kBAAkBC,SAAU,SAACC,GAK1D,IAAD,GA1BvB,SAAqBC,GAA8B,IAAD,MACxCC,EAA4B,OAAID,QAAJ,IAAIA,GAAJ,UAAIA,EAAOE,cAAX,iBAAG,EAAqCC,aAAxC,iBAAG,EAA4CC,KAAK,UAApD,aAAG,EAAqDC,KAC1F,MAAwB,qBAAbJ,GAEoB,kBAAbA,MACVA,EAAW,YACXX,EAAc,CAAEH,QAAS,4CAA6CC,KAAM,aACrE,KAeCkB,CAAYP,IAAwB,MAAlBA,EAAEG,OAAOC,OAC3BjB,EAAQa,EAAEG,OAAOC,MAAM,IACvBnB,GAAW,GACXM,EAAc,CAAEH,QAAS,GAAIC,KAAM,OAEnCJ,GAAW,GACX,QAAC,EAAAuB,SAASC,eAAe,8BAAzB,SAAqEC,UAE1EC,UAAQ,IACX,qBAAKnB,UAAU,iBAAf,SACI,eAACoB,EAAA,EAAD,CACIC,QAASvB,EAAWD,KACpBK,GAAG,gBACHoB,OAA4B,KAApBxB,EAAWD,KAHvB,UAII,cAAC0B,EAAA,EAAD,CACIC,UAAU,SACVC,KAAK,SACLH,OAA+B,gCAAvBxB,EAAWF,UACtBE,EAAWF,aAEpB,cAAC8B,EAAA,EAAD,CAAQxB,GAAG,aAAaL,KAAK,SAAS8B,OAAK,EAACC,QAAS,SAACnB,GAElD,GADAA,EAAMoB,iBACFrC,EAAS,CACT,IAAIsC,EAAiB,IAAIC,SACnBC,EAAMtC,EACZoC,EAAKG,OAAO,OAAQD,GACpBjC,EAAc,CAAEH,QAAS,8BAA+BC,KAAM,SAC9DqC,MAAM,cAAe,CACjB/B,OAAQ,OACRgC,KAAML,IAELM,MAAK,SAAAC,GACF,IAAKA,EAASC,GACV,MAAMC,MAAMF,EAASG,YAEzB,OAAOH,KAEVD,MAAK,SAAAC,GAAQ,OAAIA,EAASI,UAC1BL,MAAK,SAAAC,GACEA,EAASK,MACT3C,EAAc,CAAEH,QAAS,wCAA0CyC,EAASzC,QAASC,KAAM,WAE3FP,EAAKqD,WAAWN,EAASO,gBAAiBlD,MAIjDmD,OAAM,SAAUH,GACb3C,EAAc,CAAEH,QAAS,GAAK8C,EAAO7C,KAAM,mBAGnDE,EAAc,CAAEH,QAAS,iCAAkCC,KAAM,aAGrEiD,SAAiC,gCAAvBhD,EAAWF,QAjCzB,SAkC4B,gCAAvBE,EAAWF,QAA4C,kBAAoB,sBCrF1FmD,G,YAAkB,CAAC,aAAc,gBAAiB,2BAuBzCC,IClBVC,EDkBUD,EArBf,SAAuBE,GAGnB,IAFA,IAAMC,EAAuB,GAEpBC,EAAI,EAAGA,EAAI,EAAGA,IACnBD,EAAME,KAAM,qBAERnD,GAAI,YAAckD,EAClBpD,UAAW,8BACJoD,IAAMF,EAAMI,SAAW,0BAA4B,KACnDF,EAAIF,EAAMI,SAAW,4BAA8B,IALlD,cAORP,EAAgBK,KANXA,IASb,OACI,qBAAKpD,UAAU,mBAAf,SACI,oBAAIA,UAAU,mCAAd,SAAkDmD,O,gECbzDF,K,cAAAA,E,cAAAA,E,kBAAAA,E,YAAAA,E,yBAAAA,M,KAQL,IAAMM,EAAgB,IAAIC,IAAyB,CAC/C,CAACP,EAAYQ,MAAO,qBACpB,CAACR,EAAYS,MAAO,wBACpB,CAACT,EAAYU,QAAS,oBACtB,CAACV,EAAYW,KAAM,oBACnB,CAACX,EAAYY,WAAY,kCAmIdC,MAhIf,SAAoBZ,GAgBhB,IAAMa,EAAe,WACjB,OAAQC,GACJ,KAAKf,EAAYQ,MACjB,KAAKR,EAAYW,KACbV,EAAMe,aAAaf,EAAMgB,MAAO,IAChC,MACJ,KAAKjB,EAAYS,MACbR,EAAMe,aAAaf,EAAMgB,MAAOC,GAChC,MACJ,KAAKlB,EAAYU,QACjB,KAAKV,EAAYY,WACjB,QACIX,EAAMe,aAAaf,EAAMgB,MAAO,QAKtCE,EAAiB,SAAC3D,GACpB,IAAM4D,EAAQ5D,EAAME,OACfwD,MACAG,QAAQ,cAAe,IACvBC,UAAU,EAAG,GACbC,cACL,OAAQH,EAAKI,QACT,KAAK,EAGDC,EAAUzB,EAAYQ,OACtB,MACJ,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EAGDiB,EAAUzB,EAAYY,YACtB,MACJ,KAAK,EACGQ,IAASnB,EAAMgB,MAAMI,QAAQ,cAAe,IAG5CI,EAAUzB,EAAYW,MAItBc,EAAUzB,EAAYS,OAE1B,MACJ,QAIIgB,EAAUzB,EAAYU,SAE9BgB,EAASN,IAnEd,EAuE6B9E,mBAAS0D,EAAYQ,OAvElD,mBAuEQO,EAvER,KAuEgBU,EAvEhB,OAwE2BnF,mBAAS,IAxEpC,mBAwEQ4E,EAxER,KAwEeQ,EAxEf,KA0EC,OACI,gCACI,sBAAK3E,UAAU,YAAY4E,MAAO,CAAEC,gBAAiB3B,EAAMgB,OAA3D,UACI,qBACIhE,GAAE,cAASgD,EAAMgB,OACjBlE,UAAU,aACV4E,MAAO,CAAEC,gBAAgB,IAAD,OAAMV,GAASW,QAASd,IAAWf,EAAYS,MAAQ,QAAU,UAE7F,mBACI9B,QAjFhB,SAAuBnB,GACnB,IAAMsE,EAA0BtE,EAAME,OAChCqE,EAAkBhE,SAASiE,cAAc,SAC/CD,EAAgBb,MAAQjB,EAAMgB,MAC9Ba,EAAwBG,MAAMF,GAC9BA,EAAgBG,SAChBnE,SAASoE,YAAY,QACrBJ,EAAgBK,UAyER,SAC6BnC,EAAMgB,WAGvC,mBAAGlE,UAAU,QAAb,SAAsBkD,EAAMoC,QAC5B,cAACC,EAAA,EAAD,CACIC,UAAU,eACVC,YAAY,EACZC,QACI,cAACC,EAAA,EAAD,CACIzF,GAAE,qBAAgBgD,EAAMgB,OACxB0B,KAAM5B,IAAWf,EAAYQ,MAFjC,SAIKF,EAAcsC,IAAI7B,KAR/B,SAWK,gBAAG8B,EAAH,EAAGA,IAAQC,EAAX,8BACG,eAACC,EAAA,EAAD,2BACQD,GADR,cAEI,cAACC,EAAA,EAAWC,QAAZ,UACI,cAACD,EAAA,EAAWE,KAAZ,CACIJ,IAAKA,EACL5F,GAAE,gBAAWgD,EAAMgB,OACnBlE,UAAWgE,EAHf,iBAMJ,cAACmC,EAAA,EAAD,CACIC,YAAY,YACZC,mBAAiB,YACjBC,aAAW,YACXC,mBAAA,gBAA2BrD,EAAMgB,OACjCC,MAAOA,EACPqC,OAAQzC,EACRxD,SAAU6D,e,8BCgBvBqC,MArJf,SAAmBvD,GACf,IAAMwD,EAAQxD,EAAMwD,QACdC,EAASD,EAAMC,OACfjH,EAAOgH,EAAMhH,KAH6D,EAK9CH,mBAAS,CACvCqH,wBAAyB,IAAIpD,IAC7BqD,OAAQ,IAAIC,IACZC,MAAO,CACHlH,KAAM,SACNmH,IAAK,yCACLC,QAAQ,GAEZC,0BAA0B,IAbkD,mBAKzEC,EALyE,KAK9DC,EAL8D,KAgB1EC,EAAuC,GAE7C,IAAK,IAAIC,KAASX,EACdU,EAAiBhE,KACb,cAAC,EAAD,CACIY,aAAc,SAACC,EAAeqD,GACT,OAAbA,EAEAH,GAAa,SAACV,GAAD,OAAWc,IAAOd,EAAO,CAClCE,wBAAyB,CAAEa,QAAS,CAACvD,IACrC2C,OAAQ,CAAEa,KAAM,CAACxD,SAED,KAAbqD,EAEPH,GAAa,SAACV,GAAD,OAAWc,IAAOd,EAAO,CAClCE,wBAAyB,CAAEa,QAAS,CAACvD,IACrC2C,OAAQ,CAAEY,QAAS,CAACvD,UAIxBkD,GAAa,SAACV,GAAD,OAAWc,IAAOd,EAAO,CAClCE,wBAAyB,CAAEc,KAAM,CAAC,CAACxD,EAAOqD,KAC1CV,OAAQ,CAAEY,QAAS,CAACvD,SAEI,kCAAxBiD,EAAUJ,MAAMC,KAChBI,GAAa,SAACV,GAAD,OAAWc,IAAOd,EAAO,CAClCK,MAAO,CACHE,OAAQ,CAAEU,MAAM,WAOpCzD,MAAOyC,EAAOW,GAAO,GACrBhC,MAAOqB,EAAOW,GAAO,IAFhBA,IAMjB,OACI,uBAAMpH,GAAG,cAAc0H,aAAa,MAApC,UACI,8BAAG,qDAA4BlI,EAAKmI,QACpC,qBAAK7H,UAAU,kBAAf,SACKqH,IAEL,qBAAKrH,UAAU,iBAAf,SACI,eAACoB,EAAA,EAAD,CACIC,QAAS8F,EAAUJ,MAAMlH,KACzBK,GAAG,gBACHoB,OAAkC,IAA1B6F,EAAUN,OAAO/F,OAAeqG,EAAUJ,MAAME,OAH5D,UAII,cAAC1F,EAAA,EAAD,CACIC,UAAU,SACVC,KAAK,SACLH,OAAgC,mCAAxB6F,EAAUJ,MAAMC,MACA,IAA1BG,EAAUN,OAAO/F,KAAa,yCAA2CgH,MAAMC,KAAKZ,EAAUN,QAAQmB,KAAK,MAAQb,EAAUJ,MAAMC,SAG7I,cAACtF,EAAA,EAAD,CAAQ7B,KAAK,SACT+B,QACK,SAACnB,GAEE,GADAA,EAAMoB,iBACwB,IAA1BsF,EAAUN,OAAO/F,KAAY,CAC7B,IAAMmH,EAAUjH,SAASkH,cAAc,kBAChC,OAAPD,QAAO,IAAPA,KAASE,UAAUC,IAAI,oBAAqB,kBAC5CC,YAAW,WACA,OAAPJ,QAAO,IAAPA,KAASE,UAAU9C,OAAO,oBAC3B,UACA,GAAI8B,EAAUP,wBAAwB9F,KAAO,EAAG,CACnDsG,GAAa,SAACV,GAAD,OAAWc,IAAOd,EAAO,CAClCK,MAAO,CACHE,OAAQ,CAAEU,MAAM,GAChB9H,KAAM,CAAE8H,KAAM,QACdX,IAAK,CAAEW,KAAM,wCAGrB,IAAI7F,EAAiB,IAAIC,SACnBC,EAAMtC,EACZoC,EAAKG,OAAO,OAAQD,GACpBmF,EAAUP,wBAAwB0B,SAAQ,SAACnE,EAAOoE,GAC9CzG,EAAKG,OAAOsG,EAAKpE,MAErBjC,MAAM,gBAAiB,CACnB/B,OAAQ,OACRgC,KAAML,IAELM,MAAK,SAAAC,GACF,IAAKA,EAASC,GACV,MAAMC,MAAMF,EAASG,YAEzB,OAAOH,KAEVD,MAAK,SAAAC,GAAQ,OAAIA,EAASI,UAC1BL,MAAK,SAAAC,GACEA,EAASK,MACT0E,GAAa,SAACV,GAAD,OAAWc,IAAOd,EAAO,CAClCK,MAAO,CACHE,OAAQ,CAAEU,MAAM,GAChB9H,KAAM,CAAE8H,KAAM,UACdX,IAAK,CAAEW,KAAM,uDAAyDtF,EAASzC,eAIvFsD,EAAMsF,aAAanG,EAASoG,QAGnC5F,OAAM,SAAUH,GACb0E,GAAa,SAACV,GAAD,OAAWc,IAAOd,EAAO,CAClCK,MAAO,CACHE,OAAQ,CAAEU,MAAM,GAChB9H,KAAM,CAAE8H,KAAM,UACdX,IAAK,CAAEW,KAAM,mBAAqBjF,iBAKlD0E,GAAa,SAACV,GAAD,OAAWc,IAAOd,EAAO,CAClCK,MAAO,CACHE,OAAQ,CAAEU,MAAM,GAChB9H,KAAM,CAAE8H,KAAM,UACdX,IAAK,CAAEW,KAAM,wCAMjChG,OAAK,EACLmB,SAAkC,mCAAxBqE,EAAUJ,MAAMC,IArE9B,SAsE6B,mCAAxBG,EAAUJ,MAAMC,IAA2C,gBAAkB,mBCzI/E0B,ICTVC,EDSUD,EAff,SAAkBxF,GACd,IAAM0F,EAAc1F,EAAM0F,cACpBC,GAAyB,OAAXD,QAAW,IAAXA,OAAA,EAAAA,EAAaE,MAAM,QAAQ,IAAK,aACpD,OACI,gCACI,oBAAI9I,UAAU,OAAd,0BACA,mBACI+I,KAAM,+BAAiC7F,EAAMuF,MAC7CzI,UAAU,4BAA4BgJ,SAAUH,EAFpD,yC,SCAPF,O,qBAAAA,I,+BAAAA,I,sCAAAA,M,SAwDUM,E,kDA7Cb,WAAY/F,GAAa,IAAD,gCACtB,cAAMA,IAcCgG,sBAfe,mBAgBrBP,EAASQ,QACR,cAAC,EAAD,CACExG,WACE,SAACgE,EAA8BjH,GAC7B,EAAK0J,SAAS,CAAEzC,OAAQA,EAAQrD,SAAUqF,EAASU,aAAc3J,KAAMA,QApBzD,cAsBrBiJ,EAASU,aACR,cAAC,EAAD,CACE3C,MAAO,WAAQ,OAAO,EAAKA,OAC3B8B,aACE,SAACc,GAAqB,EAAKF,SAAS,CAAEX,IAAKa,EAAQhG,SAAUqF,EAASY,sBA1BtD,cA4BrBZ,EAASY,gBACR,cAAC,EAAD,CACEd,IAAK,WAAQ,OAAO,EAAK/B,MAAM+B,KAC/BG,YAAa,WAAO,IAAD,EAAE,iBAAO,EAAKlC,MAAMhH,YAAlB,aAAO,EAAiBmI,SA/B3B,GAEtB,EAAKnB,MAAQ,CACXC,OAAQ,KACRrD,SAAUqF,EAASQ,QACnBzJ,KAAM,KACN+I,IAAK,IANe,E,2DAUTzB,GACbD,MAAMC,K,+BAwBN,OACE,gCACE,cAAC,EAAD,CAAewC,cAAeb,EAAUrF,SAAUmG,KAAK/C,MAAMpD,WAC5DmG,KAAKP,qBAAqBO,KAAK/C,MAAMpD,iB,GAvC5BoG,IAAMC,WCJTC,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqB1H,MAAK,YAAkD,IAA/C2H,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCHdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFtJ,SAASC,eAAe,SAM1B2I,M","file":"static/js/main.d9e8f86c.chunk.js","sourcesContent":["import React, { ChangeEvent, useState } from 'react';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\nimport './style.css';\r\n\r\n\r\nfunction FileUpload(prop: { showColors: (colorArray: Array<Array<String>>, file: File) => void }) {\r\n    const [isValid, setIsValid] = useState(false);\r\n    const [file, setFile] = useState({});\r\n    const [alertState, setAlertState] = useState({ message: \"\", type: \"\" });\r\n\r\n    function fileIsValid(event: ChangeEvent): Boolean {\r\n        const fileSize: number | undefined = (event?.target as HTMLInputElement)?.files?.item(0)?.size;\r\n        if (typeof fileSize === \"undefined\") {\r\n            return false;\r\n        } else if (typeof fileSize === \"number\") {\r\n            if (fileSize > 15728640) {\r\n                setAlertState({ message: \"The size of the PDF must be 15 MB or less\", type: \"warning\" });\r\n                return false;\r\n            } else {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h4 className=\"mb-3\">PDF Document</h4>\r\n            <form encType=\"multipart/form-data\" id=\"id_ajax_upload_form\" method=\"POST\" noValidate>\r\n                <label htmlFor=\"input_pdf\">Choose a PDF Document: </label>\r\n                <br />\r\n                <input id=\"input_pdf\" type=\"file\" accept=\"application/pdf\" onChange={(e) => {\r\n                    if (fileIsValid(e) && e.target.files != null) {\r\n                        setFile(e.target.files[0])\r\n                        setIsValid(true);\r\n                        setAlertState({ message: \"\", type: \"\" });\r\n                    } else {\r\n                        setIsValid(false);\r\n                        (document.getElementById(\"id_ajax_upload_form\") as HTMLFormElement)?.reset();\r\n                    }\r\n                }} required></input>\r\n                <div className=\"status-wrapper\">\r\n                    <Alert\r\n                        variant={alertState.type}\r\n                        id=\"submit-status\"\r\n                        hidden={alertState.type === \"\"}>\r\n                        <Spinner\r\n                            animation=\"border\"\r\n                            role=\"status\"\r\n                            hidden={alertState.message !== \"Waiting for Server response\"}></Spinner>\r\n                        {alertState.message}</Alert>\r\n                </div>\r\n                <Button id=\"submit-pdf\" type=\"submit\" block onClick={(event: React.MouseEvent) => {\r\n                    event.preventDefault();\r\n                    if (isValid) {\r\n                        var data: FormData = new FormData();\r\n                        const pdf = file as Blob;\r\n                        data.append('file', pdf);\r\n                        setAlertState({ message: \"Waiting for Server response\", type: \"info\" });\r\n                        fetch(\"/ajax/react\", {\r\n                            method: 'POST',\r\n                            body: data\r\n                        })\r\n                            .then(response => {\r\n                                if (!response.ok) {\r\n                                    throw Error(response.statusText);\r\n                                }\r\n                                return response;\r\n                            })\r\n                            .then(response => response.json())\r\n                            .then(response => {\r\n                                if (response.error) {\r\n                                    setAlertState({ message: \"Server responded with error message: \" + response.message, type: \"danger\" });\r\n                                } else {\r\n                                    prop.showColors(response.analysis_result, file as File);\r\n                                }\r\n\r\n                            })\r\n                            .catch(function (error) {\r\n                                setAlertState({ message: \"\" + error, type: \"danger\" });\r\n                            });\r\n                    } else {\r\n                        setAlertState({ message: \"Please select a Document first\", type: \"warning\" });\r\n                    }\r\n                }}\r\n                    disabled={alertState.message === \"Waiting for Server response\"}>\r\n                    {alertState.message !== \"Waiting for Server response\" ? \"Submit Document\" : \"Waiting...\"}\r\n                </Button>\r\n            </form>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default FileUpload;","import 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './style.css';\r\n\r\n\r\nconst paginationTexts = [\"Choose PDF\", \"Choose Colors\", \"Download your new PDF!\"];\r\n\r\nfunction ProgressMeter(props: { progress: any, progress_enum: any }) {\r\n    const items: JSX.Element[] = [];\r\n\r\n    for (var i = 0; i < 3; i++) {\r\n        items.push((<li\r\n            key={i}\r\n            id={\"progress-\" + i}\r\n            className={\"list-group-item flex-fill \"\r\n                + (i === props.progress ? \"list-group-item-primary\" : \"\")\r\n                + (i < props.progress ? \"list-group-item-secondary\" : \"\")\r\n            }\r\n        > { paginationTexts[i]}</li >));\r\n    }\r\n\r\n    return (\r\n        <div className=\"progress-wrapper\">\r\n            <ul className=\"list-group list-group-horizontal\">{items}</ul>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default ProgressMeter;\r\n\r\n","\r\nimport React, { useState } from 'react';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport InputGroup from 'react-bootstrap/InputGroup';\r\nimport FormControl from 'react-bootstrap/FormControl';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\nimport './style.css';\r\n\r\nenum COLORSTATUS {\r\n    empty = \"empty\",\r\n    valid = \"valid\",\r\n    invalid = \"invalid\",\r\n    same = \"same\",\r\n    incomplete = \"incomplete\"\r\n}\r\n\r\nconst messageLookup = new Map<COLORSTATUS, string>([\r\n    [COLORSTATUS.empty, \"No Color provided\"],\r\n    [COLORSTATUS.valid, \"Valid Color provided\"],\r\n    [COLORSTATUS.invalid, \"Color is invalid\"],\r\n    [COLORSTATUS.same, \"Color is not new\"],\r\n    [COLORSTATUS.incomplete, \"Color must have 6 characters\"]\r\n]);\r\n\r\nfunction ColorInput(props: {\r\n    color: string,\r\n    pages: string,\r\n    updateColors: (color: string, newColor: string | null) => any\r\n}) {\r\n\r\n    function copyColorcode(event: React.MouseEvent): void {\r\n        const htmlparagraph_colorcode = event.target as HTMLParagraphElement;\r\n        const temp_input_elem = document.createElement(\"input\");\r\n        temp_input_elem.value = props.color;\r\n        htmlparagraph_colorcode.after(temp_input_elem);\r\n        temp_input_elem.select()\r\n        document.execCommand(\"copy\");\r\n        temp_input_elem.remove();\r\n    }\r\n\r\n    const handleOnBlur = () => {\r\n        switch (status) {\r\n            case COLORSTATUS.empty:\r\n            case COLORSTATUS.same:\r\n                props.updateColors(props.color, \"\");\r\n                break;\r\n            case COLORSTATUS.valid:\r\n                props.updateColors(props.color, value);\r\n                break;\r\n            case COLORSTATUS.invalid:\r\n            case COLORSTATUS.incomplete:\r\n            default:\r\n                props.updateColors(props.color, null);\r\n                break;\r\n        }\r\n    }\r\n\r\n    const handleOnChange = (event: React.ChangeEvent) => {\r\n        const nval = (event.target as HTMLInputElement)\r\n            .value\r\n            .replace(/[^a-f0-9]/gi, '')\r\n            .substring(0, 6)\r\n            .toLowerCase();\r\n        switch (nval.length) {\r\n            case 0:\r\n                // input is empty string => reset entry\r\n                // => display default indicator\r\n                setStatus(COLORSTATUS.empty)\r\n                break;\r\n            case 1:\r\n            case 2:\r\n            case 3:\r\n            case 4:\r\n            case 5:\r\n                // color code is invalid as it is less than 6 characters but can still become valid\r\n                // => display soem other indicator\r\n                setStatus(COLORSTATUS.incomplete);\r\n                break;\r\n            case 6:\r\n                if (nval === props.color.replace(/[^a-f0-9]/gi, '')) {\r\n                    // color code is valid but same as original color\r\n                    // => display orange indicator\r\n                    setStatus(COLORSTATUS.same)\r\n                } else {\r\n                    // color code is valid and not same as original color\r\n                    // => display green indicator and color preview\r\n                    setStatus(COLORSTATUS.valid);\r\n                }\r\n                break;\r\n            default:\r\n                // color code is invalid\r\n                // => display red indicator\r\n                // should not be reachable\r\n                setStatus(COLORSTATUS.invalid);\r\n        }\r\n        setValue(nval);\r\n        return;\r\n    }\r\n\r\n    const [status, setStatus] = useState(COLORSTATUS.empty);\r\n    const [value, setValue] = useState(\"\");\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"colorcode\" style={{ backgroundColor: props.color }}>\r\n                <div\r\n                    id={`pre-${props.color}`}\r\n                    className=\"right-side\"\r\n                    style={{ backgroundColor: `#${value}`, display: status === COLORSTATUS.valid ? \"block\" : \"None\" }}\r\n                ></div>\r\n                <p\r\n                    onClick={copyColorcode}>{props.color}\r\n                </p>\r\n            </div>\r\n            <p className=\"pages\">{props.pages}</p>\r\n            <OverlayTrigger\r\n                placement=\"bottom-start\"\r\n                transition={false} // necessary to prevent deprecation warning for findDOMNode\r\n                overlay={\r\n                    <Tooltip\r\n                        id={`tooltip-id-${props.color}`}\r\n                        show={status !== COLORSTATUS.empty}\r\n                    >\r\n                        {messageLookup.get(status)}\r\n                    </Tooltip>}\r\n            >\r\n                {({ ref, ...triggerHandler }) => (\r\n                    <InputGroup\r\n                        {...triggerHandler}>\r\n                        <InputGroup.Prepend>\r\n                            <InputGroup.Text\r\n                                ref={ref}\r\n                                id={`input-${props.color}`}\r\n                                className={status}\r\n                            >#</InputGroup.Text>\r\n                        </InputGroup.Prepend>\r\n                        <FormControl\r\n                            placeholder=\"new Color\"\r\n                            aria-placeholder=\"new Color\"\r\n                            aria-label=\"new Color\"\r\n                            aria-describedby={`input-${props.color}`}\r\n                            value={value}\r\n                            onBlur={handleOnBlur}\r\n                            onChange={handleOnChange}\r\n                        />\r\n                    </InputGroup >\r\n                )}\r\n            </OverlayTrigger>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default ColorInput;","import React, { useState } from 'react';\r\nimport ColorInput from '../ColorInput'\r\nimport './style.css';\r\nimport 'animate.css';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\nimport update from 'immutability-helper';\r\nimport Alert from 'react-bootstrap/Alert';\r\n\r\n// TODO: exclude pages\r\n\r\nfunction ColorForm(props: { state: () => any, handleChange: (b64: string) => any }) {\r\n    const state = props.state();\r\n    const colors = state.colors;\r\n    const file = state.file;\r\n\r\n    const [formState, setFormState] = useState({\r\n        mapOldColorsToNewColors: new Map(),\r\n        errors: new Set(),\r\n        alert: {\r\n            type: \"danger\",\r\n            msg: \"You submitted invalid new colors for: \",\r\n            active: false\r\n        },\r\n        waitingForServerResponse: false\r\n    });\r\n\r\n    const colorInputsArray: Array<JSX.Element> = [];\r\n\r\n    for (var index in colors) {\r\n        colorInputsArray.push(\r\n            <ColorInput\r\n                updateColors={(color: string, newColor: string | null) => {\r\n                    if (newColor === null) {\r\n                        // Error-Case\r\n                        setFormState((state) => update(state, {\r\n                            mapOldColorsToNewColors: { $remove: [color] },\r\n                            errors: { $add: [color] }\r\n                        }));\r\n                    } else if (newColor === \"\") {\r\n                        // Reset-Case\r\n                        setFormState((state) => update(state, {\r\n                            mapOldColorsToNewColors: { $remove: [color] },\r\n                            errors: { $remove: [color] }\r\n                        }));\r\n                    } else {\r\n                        // Valid-Color-Case\r\n                        setFormState((state) => update(state, {\r\n                            mapOldColorsToNewColors: { $add: [[color, newColor]] },\r\n                            errors: { $remove: [color] }\r\n                        }));\r\n                        if (formState.alert.msg === \"No valid Colors were provided\") {\r\n                            setFormState((state) => update(state, {\r\n                                alert: {\r\n                                    active: { $set: false },\r\n                                }\r\n                            }));\r\n                        }\r\n                    }\r\n                }}\r\n                key={index}\r\n                color={colors[index][0]}\r\n                pages={colors[index][1]}\r\n            />);\r\n    }\r\n\r\n    return (\r\n        <form id=\"form-colors\" autoComplete=\"off\">\r\n            <p><b>Showing Colors for: </b>{file.name}</p>\r\n            <div className=\"analysis_result\">\r\n                {colorInputsArray}\r\n            </div>\r\n            <div className=\"status-wrapper\">\r\n                <Alert\r\n                    variant={formState.alert.type}\r\n                    id=\"submit-status\"\r\n                    hidden={formState.errors.size === 0 && !formState.alert.active}>\r\n                    <Spinner\r\n                        animation=\"border\"\r\n                        role=\"status\"\r\n                        hidden={formState.alert.msg !== \"Waiting for Server response...\"}></Spinner>\r\n                    {(formState.errors.size !== 0 ? \"You submitted invalid new colors for: \" + Array.from(formState.errors).join(\", \") : formState.alert.msg)}\r\n                </Alert>\r\n            </div>\r\n            <Button type=\"submit\"\r\n                onClick={\r\n                    ((event: React.MouseEvent) => {\r\n                        event.preventDefault();\r\n                        if (formState.errors.size !== 0) {\r\n                            const element = document.querySelector('#submit-status');\r\n                            element?.classList.add('animate__animated', 'animate__pulse');\r\n                            setTimeout(function () {\r\n                                element?.classList.remove('animate__pulse');\r\n                            }, 1000);\r\n                        } else if (formState.mapOldColorsToNewColors.size > 0) {\r\n                            setFormState((state) => update(state, {\r\n                                alert: {\r\n                                    active: { $set: true },\r\n                                    type: { $set: \"info\" },\r\n                                    msg: { $set: \"Waiting for Server response...\" }\r\n                                }\r\n                            }));\r\n                            var data: FormData = new FormData();\r\n                            const pdf = file as Blob;\r\n                            data.append('file', pdf);\r\n                            formState.mapOldColorsToNewColors.forEach((value, key) => {\r\n                                data.append(key, value);\r\n                            });\r\n                            fetch(\"/ajax/process\", {\r\n                                method: 'POST',\r\n                                body: data\r\n                            })\r\n                                .then(response => {\r\n                                    if (!response.ok) {\r\n                                        throw Error(response.statusText);\r\n                                    }\r\n                                    return response;\r\n                                })\r\n                                .then(response => response.json())\r\n                                .then(response => {\r\n                                    if (response.error) {\r\n                                        setFormState((state) => update(state, {\r\n                                            alert: {\r\n                                                active: { $set: true },\r\n                                                type: { $set: \"danger\" },\r\n                                                msg: { $set: \"Request came back with the following error message: \" + response.message }\r\n                                            }\r\n                                        }));\r\n                                    } else {\r\n                                        props.handleChange(response.b64);\r\n                                    }\r\n                                })\r\n                                .catch(function (error) {\r\n                                    setFormState((state) => update(state, {\r\n                                        alert: {\r\n                                            active: { $set: true },\r\n                                            type: { $set: \"danger\" },\r\n                                            msg: { $set: \"Request failed: \" + error }\r\n                                        }\r\n                                    }));\r\n                                });\r\n                        } else {\r\n                            setFormState((state) => update(state, {\r\n                                alert: {\r\n                                    active: { $set: true },\r\n                                    type: { $set: \"danger\" },\r\n                                    msg: { $set: \"No valid Colors were provided\" }\r\n                                }\r\n                            }));\r\n                        }\r\n                    })\r\n                }\r\n                block\r\n                disabled={formState.alert.msg === \"Waiting for Server response...\"}>\r\n                {formState.alert.msg !== \"Waiting for Server response...\" ? \"Submit Colors\" : \"Waiting...\"}</Button>\r\n        </form >\r\n\r\n    );\r\n}\r\n\r\nexport default ColorForm;\r\n\r\n","import 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nfunction Download(props: { b64: () => string, oldFileName: () => string | undefined }) {\r\n    const oldFileName = props.oldFileName();\r\n    const newFileName = oldFileName?.split(\".pdf\")[0] + \"-printable\";\r\n    return (\r\n        <div>\r\n            <h4 className=\"mb-3\">PDF Document</h4>\r\n            <a\r\n                href={\"data:application/pdf;base64,\" + props.b64()}\r\n                className=\"btn btn-success btn-block\" download={newFileName}>\r\n                Download your new PDF!\r\n                </a>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default Download;","import React from 'react';\nimport FileUpload from './Components/FileUpload';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ProgressMeter from './Components/ProgressMeter';\nimport ColorForm from './Components/ColorForm'\nimport Download from './Components/Download';\n\nenum Progress {\n  initial = 0,\n  submittedPDF = 1,\n  submittedColors = 2\n}\n\n\n\ntype ComponentMap = { [key in Progress]: JSX.Element | null }\n\nclass App extends React.Component<{}, { colors: Array<Array<String>> | null, progress: Progress, file: File | null, b64: string }> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      colors: null,\n      progress: Progress.initial,\n      file: null,\n      b64: \"\"\n    }\n  }\n\n  displayWarning(msg: String): void {\n    alert(msg);\n  }\n\n\n  readonly componentsByProgress: ComponentMap = {\n    [Progress.initial]:\n      <FileUpload\n        showColors={\n          (colors: Array<Array<String>>, file: File) => {\n            this.setState({ colors: colors, progress: Progress.submittedPDF, file: file });\n          }} ></FileUpload >,\n    [Progress.submittedPDF]:\n      <ColorForm\n        state={() => { return this.state; }}\n        handleChange={\n          (b64_in: string) => { this.setState({ b64: b64_in, progress: Progress.submittedColors }); }\n        } ></ColorForm >,\n    [Progress.submittedColors]:\n      <Download\n        b64={() => { return this.state.b64; }}\n        oldFileName={() => { return this.state.file?.name }}></Download>,\n  }\n\n  render() {\n    return (\n      <div>\n        <ProgressMeter progress_enum={Progress} progress={this.state.progress}></ProgressMeter>\n        {this.componentsByProgress[this.state.progress]}\n      </div>\n\n    );\n  }\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}