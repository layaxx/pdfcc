(this["webpackJsonpreact-typescript"]=this["webpackJsonpreact-typescript"]||[]).push([[0],{41:function(e,t,r){},42:function(e,t,r){},45:function(e,t,r){},46:function(e,t,r){},47:function(e,t,r){},51:function(e,t,r){},54:function(e,t,r){},55:function(e,t,r){"use strict";r.r(t);var o=r(2),s=r(0),a=r.n(s),n=r(7),i=r.n(n),c=(r(41),r(14)),l=r(28),d=r(29),u=r(34),p=r(32),m=r(8),b=(r(16),r(20)),f=r(22),j=r(19);r(42);var v=function(e){var t=Object(s.useState)(!1),r=Object(m.a)(t,2),a=r[0],n=r[1],i=Object(s.useState)({}),c=Object(m.a)(i,2),l=c[0],d=c[1],u=Object(s.useState)({message:"",type:""}),p=Object(m.a)(u,2),v=p[0],h=p[1],g=Object(s.useState)(!1),O=Object(m.a)(g,2),x=O[0],y=O[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)("h4",{className:"mb-3",children:"PDF Document"}),Object(o.jsxs)("form",{encType:"multipart/form-data",id:"id_ajax_upload_form",method:"POST",noValidate:!0,children:[Object(o.jsx)("label",{htmlFor:"input_pdf",children:"Choose a PDF Document: "}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{id:"input_pdf",type:"file",accept:"application/pdf",disabled:x,onChange:function(e){var t;(function(e){var t,r,o,s=null===e||void 0===e||null===(t=e.target)||void 0===t||null===(r=t.files)||void 0===r||null===(o=r.item(0))||void 0===o?void 0:o.size;return"undefined"!==typeof s&&"number"===typeof s&&(!(s>15728640)||(h({message:"The size of the PDF must be 15 MB or less",type:"warning"}),!1))})(e)&&null!=e.target.files?(d(e.target.files[0]),n(!0),h({message:"",type:""})):(n(!1),null===(t=document.getElementById("id_ajax_upload_form"))||void 0===t||t.reset())},required:!0}),Object(o.jsx)("div",{className:"status-wrapper",children:Object(o.jsxs)(f.a,{variant:v.type,id:"submit-status",hidden:""===v.type,children:[Object(o.jsx)(j.a,{animation:"border",role:"status",hidden:!x}),v.message]})}),Object(o.jsx)(b.a,{id:"submit-pdf",type:"submit",onClick:function(t){if(t.preventDefault(),a){var r=new FormData,o=l;r.append("file",o),h({message:"Waiting for Server response",type:"info"}),y(!0),fetch("/ajax/react",{method:"POST",body:r}).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})).then((function(t){t.error?(h({message:"Server responded with error message: "+t.message,type:"danger"}),y(!1)):e.showColors(t.analysis_result,l)})).catch((function(e){h({message:""+e,type:"danger"}),y(!1)}))}else h({message:"Please select a Document first",type:"warning"})},disabled:x,block:!0,children:x?"Waiting...":"Submit Document"})]})]})},h=(r(45),r(46),["Choose PDF","Choose Colors","Download PDF!"]);var g,O=function(e){for(var t=[],r=0;r<3;r++)t.push(Object(o.jsxs)("li",{id:"progress-"+r,className:"list-group-item flex-fill "+(r===e.progress?"list-group-item-primary":"")+(r<e.progress?"list-group-item-secondary":""),children:[" ",h[r]]},r));return Object(o.jsx)("div",{className:"progress-wrapper",children:Object(o.jsx)("ul",{className:"list-group list-group-horizontal",children:t})})},x=r(27),y=r(35),C=r(24),w=r(33),N=r(31),D=r(30);r(47);!function(e){e.empty="empty",e.valid="valid",e.invalid="invalid",e.same="same",e.incomplete="incomplete"}(g||(g={}));var S=new Map([[g.empty,"No Color provided"],[g.valid,"Valid Color provided"],[g.invalid,"Color is invalid"],[g.same,"Color is not new"],[g.incomplete,"Color must have 6 characters"]]);var k=function(e){var t=function(){switch(i){case g.empty:case g.same:e.updateColors(e.color,"");break;case g.valid:e.updateColors(e.color,u);break;case g.invalid:case g.incomplete:default:e.updateColors(e.color,null)}},r=function(t){var r=t.target.value.replace(/[^a-f0-9]/gi,"").substring(0,6).toLowerCase();switch(r.length){case 0:c(g.empty);break;case 1:case 2:case 3:case 4:case 5:c(g.incomplete);break;case 6:r===e.color.replace(/[^a-f0-9]/gi,"")?c(g.same):c(g.valid);break;default:c(g.invalid)}p(r)},a=Object(s.useState)(g.empty),n=Object(m.a)(a,2),i=n[0],c=n[1],l=Object(s.useState)(""),d=Object(m.a)(l,2),u=d[0],p=d[1];return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"colorcode",style:{backgroundColor:e.color},children:[Object(o.jsx)("div",{id:"pre-".concat(e.color),className:"right-side",style:{backgroundColor:"#".concat(u),display:i===g.valid?"block":"None"}}),Object(o.jsx)("p",{onClick:function(t){var r=t.target,o=document.createElement("input");o.value=e.color,r.after(o),o.select(),document.execCommand("copy"),o.remove()},children:e.color})]}),Object(o.jsx)("p",{className:"pages",children:e.pages}),Object(o.jsx)(N.a,{placement:"bottom-start",transition:!1,overlay:Object(o.jsx)(D.a,{id:"tooltip-id-".concat(e.color),show:i!==g.empty,children:S.get(i)}),children:function(s){var a=s.ref,n=Object(y.a)(s,["ref"]);return Object(o.jsxs)(C.a,Object(x.a)(Object(x.a)({},n),{},{children:[Object(o.jsx)(C.a.Prepend,{children:Object(o.jsx)(C.a.Text,{ref:a,id:"input-".concat(e.color),className:i,children:"#"})}),Object(o.jsx)(w.a,{placeholder:"new Color","aria-placeholder":"new Color","aria-label":"new Color","aria-describedby":"input-".concat(e.color),value:u,onBlur:t,onChange:r})]}))}})]})},$=(r(51),r(52),r(9)),P=r.n($);var F=function(e){e.preventDefault(),e.returnValue=!0};var _=function(e){window.addEventListener("beforeunload",F);var t=e.state(),r=t.colors,a=t.file,n=Object(s.useState)({mapOldColorsToNewColors:new Map,errors:new Set,alert:{type:"danger",msg:"You submitted invalid new colors for: ",active:!1},waitingForServerResponse:!1}),i=Object(m.a)(n,2),c=i[0],l=i[1],d=[];for(var u in r)d.push(Object(o.jsx)(k,{updateColors:function(e,t){null===t?l((function(t){return P()(t,{mapOldColorsToNewColors:{$remove:[e]},errors:{$add:[e]}})})):""===t?l((function(t){return P()(t,{mapOldColorsToNewColors:{$remove:[e]},errors:{$remove:[e]}})})):(l((function(r){return P()(r,{mapOldColorsToNewColors:{$add:[[e,t]]},errors:{$remove:[e]}})})),"No valid Colors were provided"===c.alert.msg&&l((function(e){return P()(e,{alert:{active:{$set:!1}}})})))},color:r[u][0],pages:r[u][1]},u));return Object(o.jsxs)("form",{id:"form-colors",autoComplete:"off",children:[Object(o.jsxs)("p",{children:[Object(o.jsx)("b",{children:"Showing Colors for: "}),a.name]}),Object(o.jsx)("div",{className:"analysis_result",children:d}),Object(o.jsx)("div",{className:"status-wrapper",children:Object(o.jsxs)(f.a,{variant:c.alert.type,id:"submit-status",hidden:0===c.errors.size&&!c.alert.active,children:[Object(o.jsx)(j.a,{animation:"border",role:"status",hidden:"Waiting for Server response..."!==c.alert.msg}),0!==c.errors.size?"You submitted invalid new colors for: "+Array.from(c.errors).join(", "):c.alert.msg]})}),Object(o.jsx)(b.a,{type:"submit",onClick:function(t){if(t.preventDefault(),0!==c.errors.size){var r=document.querySelector("#submit-status");null===r||void 0===r||r.classList.add("animate__animated","animate__pulse"),setTimeout((function(){null===r||void 0===r||r.classList.remove("animate__pulse")}),1e3)}else if(c.mapOldColorsToNewColors.size>0){l((function(e){return P()(e,{alert:{active:{$set:!0},type:{$set:"info"},msg:{$set:"Waiting for Server response..."}}})}));var o=new FormData,s=a;o.append("file",s),c.mapOldColorsToNewColors.forEach((function(e,t){o.append(t,e)})),fetch("/ajax/process",{method:"POST",body:o}).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})).then((function(t){t.error?l((function(e){return P()(e,{alert:{active:{$set:!0},type:{$set:"danger"},msg:{$set:"Request came back with the following error message: "+t.message}}})})):e.handleChange(t.b64)})).catch((function(e){l((function(t){return P()(t,{alert:{active:{$set:!0},type:{$set:"danger"},msg:{$set:"Request failed: "+e}}})}))}))}else l((function(e){return P()(e,{alert:{active:{$set:!0},type:{$set:"danger"},msg:{$set:"No valid Colors were provided"}}})}))},block:!0,disabled:"Waiting for Server response..."===c.alert.msg,children:"Waiting for Server response..."!==c.alert.msg?"Submit Colors":"Waiting..."})]})};r(54);var T,E=function(e){var t=e.oldFileName(),r=(null===t||void 0===t?void 0:t.split(".pdf")[0])+"-printable";return Object(o.jsxs)("div",{children:[Object(o.jsx)("h4",{className:"mb-3",children:"PDF Document"}),Object(o.jsx)("a",{href:"data:application/pdf;base64,"+e.b64(),className:"btn btn-success btn-block",download:r,onClick:function(){window.removeEventListener("beforeunload",F)},children:"Download your new PDF!"}),Object(o.jsxs)("p",{className:"next",children:["Do you want to"," ",Object(o.jsx)("a",{href:"/",children:"process another Document?"})]})]})};!function(e){e[e.initial=0]="initial",e[e.submittedPDF=1]="submittedPDF",e[e.submittedColors=2]="submittedColors"}(T||(T={}));var W=function(e){Object(u.a)(r,e);var t=Object(p.a)(r);function r(e){var s,a;return Object(l.a)(this,r),(a=t.call(this,e)).componentsByProgress=(s={},Object(c.a)(s,T.initial,Object(o.jsx)(v,{showColors:function(e,t){a.setState({colors:e,progress:T.submittedPDF,file:t})}})),Object(c.a)(s,T.submittedPDF,Object(o.jsx)(_,{state:function(){return a.state},handleChange:function(e){a.setState({b64:e,progress:T.submittedColors})}})),Object(c.a)(s,T.submittedColors,Object(o.jsx)(E,{b64:function(){return a.state.b64},oldFileName:function(){var e;return null===(e=a.state.file)||void 0===e?void 0:e.name}})),s),a.state={colors:null,progress:T.initial,file:null,b64:""},a}return Object(d.a)(r,[{key:"displayWarning",value:function(e){alert(e)}},{key:"render",value:function(){return Object(o.jsxs)("div",{children:[Object(o.jsx)(O,{progress_enum:T,progress:this.state.progress}),this.componentsByProgress[this.state.progress]]})}}]),r}(a.a.Component);i.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(W,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.cf773e49.chunk.js.map